# åŸå§‹æ•°æ®è¯´æ˜æ–‡æ¡£ (Raw Data Guide)

## ğŸ“ æ•°æ®æ¦‚è§ˆ

### ç›®å½•ç»“æ„

```
data/raw/
â”œâ”€â”€ A/          # Site A - 18ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â”œâ”€â”€ B/          # Site B - 20ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â”œâ”€â”€ C/          # Site C - 19ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â”œâ”€â”€ D/          # Site D - 18ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â”œâ”€â”€ E/          # Site E - 18ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â”œâ”€â”€ F/          # Site F - 18ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â”œâ”€â”€ G/          # Site G - 18ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â”œâ”€â”€ H/          # Site H - 18ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
â””â”€â”€ I/          # Site I - 13ä¸ªæ— äººæœºè§†é¢‘è½¨è¿¹æ–‡ä»¶
```

### æ•°æ®è§„æ¨¡

- **ç«™ç‚¹æ•°é‡**: 9ä¸ªç«™ç‚¹ (A-I)
- **æ€»æ–‡ä»¶æ•°**: 160ä¸ªCSVæ–‡ä»¶
- **æ•°æ®å¤§å°**: ~14 GB
- **è®°å½•æ•°**: æ¯ä¸ªæ–‡ä»¶çº¦17ä¸‡è¡Œè½¨è¿¹æ•°æ®

**æ–‡ä»¶åˆ†å¸ƒ**:
| ç«™ç‚¹ | æ–‡ä»¶æ•°é‡ | å¤‡æ³¨ |
|------|---------|------|
| Site A | 18 | drone_1.csv ~ drone_18.csv |
| Site B | 20 | drone_1.csv ~ drone_20.csv |
| Site C | 19 | drone_1.csv ~ drone_19.csv |
| Site D | 18 | drone_1.csv ~ drone_18.csv |
| Site E | 18 | drone_1.csv ~ drone_18.csv |
| Site F | 18 | drone_1.csv ~ drone_18.csv |
| Site G | 18 | drone_1.csv ~ drone_18.csv |
| Site H | 18 | drone_1.csv ~ drone_18.csv |
| Site I | 13 | drone_1.csv ~ drone_13.csv |

---

## ğŸ“Š CSVæ–‡ä»¶æ ¼å¼

### åˆ—å®šä¹‰ï¼ˆ22åˆ—ï¼‰

æ¯ä¸ªCSVæ–‡ä»¶åŒ…å«ä»¥ä¸‹22åˆ—ï¼š

| åˆ—å | æ•°æ®ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|---------|------|--------|
| `track_id` | float | è½¦è¾†è½¨è¿¹å”¯ä¸€æ ‡è¯†ç¬¦ | 319.0 |
| `frame` | int | è§†é¢‘å¸§ç¼–å· | 297 |
| `center_x` | float | è½¦è¾†ä¸­å¿ƒç‚¹Xåæ ‡ï¼ˆåƒç´ ï¼‰ | 1788.871 |
| `center_y` | float | è½¦è¾†ä¸­å¿ƒç‚¹Yåæ ‡ï¼ˆåƒç´ ï¼‰ | 1163.561 |
| `width` | float | è¾¹ç•Œæ¡†å®½åº¦ï¼ˆåƒç´ ï¼‰ | 53.738 |
| `height` | float | è¾¹ç•Œæ¡†é«˜åº¦ï¼ˆåƒç´ ï¼‰ | 19.965 |
| `angle` | float | è½¦è¾†æœå‘è§’åº¦ï¼ˆå¼§åº¦ï¼‰ | 3.133 |
| `x1` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹1çš„Xåæ ‡ | 1761.920 |
| `y1` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹1çš„Yåæ ‡ | 1153.802 |
| `x2` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹2çš„Xåæ ‡ | 1762.086 |
| `y2` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹2çš„Yåæ ‡ | 1173.766 |
| `x3` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹3çš„Xåæ ‡ | 1815.822 |
| `y3` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹3çš„Yåæ ‡ | 1173.320 |
| `x4` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹4çš„Xåæ ‡ | 1815.657 |
| `y4` | float | æ—‹è½¬è¾¹ç•Œæ¡†è§’ç‚¹4çš„Yåæ ‡ | 1153.356 |
| `confidence` | float | æ£€æµ‹ç½®ä¿¡åº¦ï¼ˆ0-1ï¼‰ | 0.912 |
| `class_id` | float | è½¦è¾†ç±»åˆ«ID | 0.0, 1.0, 2.0 |
| `site` | string | ç«™ç‚¹æ ‡è¯† | "Site A" |
| `lane` | string | è½¦é“æ ‡è¯† | "B5", "A1", "crossroads1" |
| `preceding_id` | float | å‰è½¦track_idï¼ˆå¯ä¸ºç©ºï¼‰ | 322.0 æˆ– ç©º |
| `following_id` | float | åè½¦track_idï¼ˆå¯ä¸ºç©ºï¼‰ | 322.0 æˆ– ç©º |
| `timestamp` | string | æ—¶é—´æˆ³ (HH:MM:SS.mmm) | 07:35:27.012 |

### æ•°æ®ç¤ºä¾‹

```csv
track_id,frame,center_x,center_y,width,height,angle,x1,y1,x2,y2,x3,y3,x4,y4,confidence,class_id,site,lane,preceding_id,following_id,timestamp
319.0,297,1788.871,1163.561,53.738,19.965,3.133,1761.920,1153.802,1762.086,1173.766,1815.822,1173.320,1815.657,1153.356,0.912,2.0,Site A,B5,,322.0,07:35:27.012
319.0,298,1788.923,1163.573,53.812,19.982,3.132,1761.927,1153.828,1762.110,1173.809,1815.919,1173.317,1815.736,1153.336,0.913,2.0,Site A,B5,,322.0,07:35:27.046
319.0,299,1788.957,1163.559,53.937,20.020,3.132,1761.894,1153.807,1762.085,1173.826,1816.020,1173.311,1815.829,1153.292,0.912,2.0,Site A,B5,,322.0,07:35:27.079
```

---

## ğŸš— æ•°æ®ç‰¹å¾è¯´æ˜

### 1. è½¦è¾†ç±»åˆ« (class_id)

åŸºäºè§‚å¯Ÿåˆ°çš„æ•°æ®ï¼Œ`class_id` æœ‰ä»¥ä¸‹å–å€¼ï¼š

| class_id | è½¦è¾†ç±»å‹ï¼ˆæ¨æµ‹ï¼‰ |
|----------|-----------------|
| 0.0 | å°å‹è½¦è¾†ï¼ˆå¯èƒ½æ˜¯æ‘©æ‰˜è½¦/è‡ªè¡Œè½¦ï¼‰ |
| 1.0 | ä¸­å‹è½¦è¾†ï¼ˆè½¿è½¦/SUVï¼‰ |
| 2.0 | å¤§å‹è½¦è¾†ï¼ˆå¡è½¦/å…¬äº¤è½¦ï¼‰ |

**æ³¨æ„**: å…·ä½“ç±»åˆ«å®šä¹‰éœ€è¦å‚è€ƒåŸå§‹æ•°æ®é›†çš„æ ‡æ³¨è¯´æ˜ã€‚

### 2. è½¦é“æ ‡è¯† (lane)

æ¯ä¸ªç«™ç‚¹çš„è½¦é“å‘½åè§„åˆ™ï¼š

**Site A ç¤ºä¾‹è½¦é“**:
```
A1, A2, A3, A4, A5, A6       # Aç³»åˆ—è½¦é“ï¼ˆ6æ¡ï¼‰
B1, B2, B3, B4, B5, B6, B7   # Bç³»åˆ—è½¦é“ï¼ˆ7æ¡ï¼‰
C1, C2, C3, C4, C5           # Cç³»åˆ—è½¦é“ï¼ˆ5æ¡ï¼‰
crossroads1                  # åå­—è·¯å£åŒºåŸŸ
```

**æ€»è®¡**: Site A æœ‰19æ¡è½¦é“ï¼ˆåŒ…æ‹¬è·¯å£åŒºåŸŸï¼‰

**Site B ç¤ºä¾‹è½¦é“**:
```
A1, A2, A3, A4, A5, A6       # Aç³»åˆ—è½¦é“
B1, B2, B3, B4, B5, B6       # Bç³»åˆ—è½¦é“
C1, C2, C3                   # Cç³»åˆ—è½¦é“
```

**ç‰¹ç‚¹**:
- ä¸åŒç«™ç‚¹çš„è½¦é“æ•°é‡å’Œå‘½åå¯èƒ½ä¸åŒ
- "crossroads" ç³»åˆ—è¡¨ç¤ºè·¯å£/äº¤å‰åŒºåŸŸ
- è½¦é“å‘½åæ ¼å¼: å­—æ¯+æ•°å­— (å¦‚ A1, B2)

### 3. æ—¶é—´å‚æ•°

**é‡‡æ ·ç‡**: 30 FPS (æ¯ç§’30å¸§)

**æ—¶é—´è®¡ç®—**:
- å¸§é—´éš” `dt = 1/30 â‰ˆ 0.0333` ç§’
- æ¯å¸§çº¦33.3æ¯«ç§’

**ç¤ºä¾‹æ—¶é—´è·¨åº¦** (drone_1.csv from Site A):
- èµ·å§‹æ—¶é—´: `07:35:27.012`
- ç»“æŸæ—¶é—´: `07:39:06.231`
- æŒç»­æ—¶é—´: ~3åˆ†39ç§’
- æ€»å¸§æ•°: 6867å¸§

### 4. åæ ‡ç³»ç»Ÿ

**åæ ‡å•ä½**: åƒç´ åæ ‡ï¼ˆå›¾åƒåæ ‡ç³»ï¼‰

**åæ ‡èŒƒå›´** (å› ç«™ç‚¹è€Œå¼‚):
- Xåæ ‡: çº¦0 ~ 4000åƒç´ 
- Yåæ ‡: çº¦0 ~ 3000åƒç´ 

**æ³¨æ„**:
- æ¯ä¸ªç«™ç‚¹æœ‰è‡ªå·±çš„å±€éƒ¨åæ ‡ç³»ï¼ˆæ— äººæœºæ‹æ‘„è§†è§’ï¼‰
- ä¸åŒç«™ç‚¹çš„åæ ‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ
- é¢„å¤„ç†é˜¶æ®µä¼šè¿›è¡Œç«™ç‚¹çº§åˆ«çš„åæ ‡æ ‡å‡†åŒ–

### 5. è¾¹ç•Œæ¡†ä¿¡æ¯

**çŸ©å½¢è¾¹ç•Œæ¡†**:
- `width`, `height`: è½´å¯¹é½è¾¹ç•Œæ¡†å°ºå¯¸

**æ—‹è½¬è¾¹ç•Œæ¡†**:
- `x1, y1, x2, y2, x3, y3, x4, y4`: å››ä¸ªè§’ç‚¹åæ ‡
- `angle`: è½¦è¾†æœå‘è§’åº¦ï¼ˆå¼§åº¦åˆ¶ï¼‰

**ç”¨é€”**:
- å®½åº¦/é«˜åº¦ç”¨äºä¼°è®¡è½¦è¾†å°ºå¯¸
- è§’åº¦ç”¨äºè®¡ç®—è½¦è¾†æœå‘
- æ—‹è½¬è¾¹ç•Œæ¡†å¯ç”¨äºæ›´ç²¾ç¡®çš„å‡ ä½•è®¡ç®—

### 6. è½¦è¾†å…³ç³»

**å‰åè½¦å…³ç³»**:
- `preceding_id`: åŒè½¦é“å‰æ–¹è½¦è¾†çš„track_id
- `following_id`: åŒè½¦é“åæ–¹è½¦è¾†çš„track_id

**ç‰¹ç‚¹**:
- å¯ä»¥ä¸ºç©ºï¼ˆè¡¨ç¤ºæ— å‰è½¦/åè½¦ï¼‰
- ç”¨äºè½¦è¾†è·Ÿé©°è¡Œä¸ºåˆ†æ
- æ„å»ºè½¦è¾†é—´ç¤¾äº¤å…³ç³»å›¾

---

## ğŸ” æ•°æ®è´¨é‡ç‰¹å¾

### 1. å®Œæ•´æ€§

- âœ… æ¯è¡Œæ•°æ®åŒ…å«å®Œæ•´çš„22ä¸ªå­—æ®µ
- âœ… è½¨è¿¹è¿ç»­æ€§ï¼šåŒä¸€track_idçš„è®°å½•æŒ‰frameé€’å¢æ’åˆ—
- âš ï¸ éƒ¨åˆ†å­—æ®µå¯ä¸ºç©ºï¼š`preceding_id`, `following_id`

### 2. æ—¶é—´è¿ç»­æ€§

**å¸§è¿ç»­æ€§**:
- å¤§éƒ¨åˆ†è½¨è¿¹åœ¨è¿ç»­å¸§ä¸­å‡ºç°
- å¯èƒ½å­˜åœ¨å¸§è·³è·ƒï¼ˆè½¦è¾†çŸ­æš‚é®æŒ¡ã€æ£€æµ‹å¤±è´¥ï¼‰

**æ—¶é—´é—´éš™**:
- ä¸åŒæ— äººæœºè§†é¢‘ä¹‹é—´å¯èƒ½å­˜åœ¨æ—¶é—´é—´éš™
- é¢„å¤„ç†pipelineè‡ªåŠ¨æ£€æµ‹å¹¶å¤„ç†é—´éš™ï¼ˆgap detectionï¼‰

### 3. Track IDå”¯ä¸€æ€§

**æ–‡ä»¶çº§å”¯ä¸€**:
- åŒä¸€CSVæ–‡ä»¶å†…ï¼Œtrack_idå”¯ä¸€æ ‡è¯†ä¸€è¾†è½¦
- âš ï¸ ä¸åŒCSVæ–‡ä»¶çš„track_idå¯èƒ½é‡å¤

**è§£å†³æ–¹æ¡ˆ**:
- é¢„å¤„ç†é˜¶æ®µåˆ›å»º `global_track_id = file_id * 1,000,000 + track_id`
- ç¡®ä¿å…¨å±€å”¯ä¸€æ€§

---

## ğŸ“ˆ æ•°æ®ç»Ÿè®¡ä¿¡æ¯

### å•æ–‡ä»¶ç»Ÿè®¡ (ä»¥ Site A/drone_1.csv ä¸ºä¾‹)

```
æ€»è¡Œæ•°:      171,602è¡Œ
æ–‡ä»¶å¤§å°:    ~51 MB
æ—¶é—´è·¨åº¦:    ~3åˆ†39ç§’
å¸§èŒƒå›´:      297 ~ 6867
è½¦è¾†æ•°:      çº¦400-500è¾†ï¼ˆä¸åŒtrack_idæ•°é‡ï¼‰
è½¦é“æ•°:      19æ¡ï¼ˆåŒ…æ‹¬crossroadsï¼‰
```

### å…¨æ•°æ®é›†ä¼°ç®—

```
æ€»æ–‡ä»¶æ•°:    160ä¸ªCSV
æ€»æ•°æ®é‡:    ~14 GB
æ€»è®°å½•æ•°:    çº¦2700ä¸‡è¡Œ
æ€»ç«™ç‚¹æ•°:    9ä¸ª
å¸§ç‡:        30 FPS
```

---

## ğŸ› ï¸ æ•°æ®ä½¿ç”¨æ³¨æ„äº‹é¡¹

### 1. åæ ‡å½’ä¸€åŒ–

**é—®é¢˜**: ä¸åŒç«™ç‚¹æœ‰ä¸åŒçš„å±€éƒ¨åæ ‡ç³»

**è§£å†³æ–¹æ¡ˆ**:
- é¢„å¤„ç†æ—¶å¯¹æ¯ä¸ªç«™ç‚¹ç‹¬ç«‹è¿›è¡Œz-scoreå½’ä¸€åŒ–
- ä½¿ç”¨ `site_id` ç‰¹å¾åŒºåˆ†ä¸åŒç«™ç‚¹
- æˆ–è€…è½¬æ¢ä¸ºç‰©ç†å•ä½ï¼ˆç±³ï¼‰åå†å½’ä¸€åŒ–

### 2. Track IDå†²çª

**é—®é¢˜**: ä¸åŒCSVæ–‡ä»¶çš„track_idä¼šé‡å¤

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ `global_track_id = file_id * 1M + track_id`
- é¢„å¤„ç†pipelineè‡ªåŠ¨å¤„ç†

### 3. å¸§ç¼–å·é‡ç½®

**é—®é¢˜**: ä¸åŒCSVæ–‡ä»¶çš„frameä»ä¸åŒå€¼å¼€å§‹

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ `global_frame = frame + file_offset`
- æ¯ä¸ªç«™ç‚¹æ„å»ºç»Ÿä¸€çš„å…¨å±€æ—¶é—´è½´

### 4. æ—¶é—´é—´éš™

**é—®é¢˜**: CSVæ–‡ä»¶ä¹‹é—´å¯èƒ½å­˜åœ¨æ—¶é—´é—´éš™

**è§£å†³æ–¹æ¡ˆ**:
- è‡ªåŠ¨æ£€æµ‹ gap > 1 frameçš„ä½ç½®
- åˆ†å‰²ä¸ºè¿ç»­æ®µï¼ˆsegmentsï¼‰
- Episodesä¸è·¨è¶Šé—´éš™æå–

### 5. è½¦é“ç¼–ç 

**é—®é¢˜**: ä¸åŒç«™ç‚¹çš„è½¦é“åç§°å¯èƒ½å†²çªï¼ˆå¦‚éƒ½æœ‰"A1"ï¼‰

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ç«™ç‚¹ç‰¹å®šçš„è½¦é“token: `"site:lane"`
- ä¾‹å¦‚: `"A:A1"`, `"B:A1"` ä¸ä¼šå†²çª

---

## ğŸ“‹ é¢„å¤„ç†æµç¨‹

æˆ‘ä»¬çš„é¢„å¤„ç†pipeline (`preprocess_multisite.py`) å¤„ç†è¿™äº›åŸå§‹æ•°æ®çš„æ­¥éª¤ï¼š

### Step 1: ç«™ç‚¹çº§å…¨å±€æ—¶é—´è½´æ„å»º

```python
# å¯¹æ¯ä¸ªç«™ç‚¹ (A-I):
for site in ['A', 'B', ..., 'I']:
    # 1. æ”¶é›†è¯¥ç«™ç‚¹æ‰€æœ‰CSVæ–‡ä»¶
    csv_files = glob(f'data/raw/{site}/*.csv')

    # 2. æŒ‰é¡ºåºæ‹¼æ¥ï¼Œæ„å»ºå…¨å±€æ—¶é—´è½´
    #    - global_frame = frame + file_offset
    #    - global_track_id = file_id * 1M + track_id

    # 3. æ£€æµ‹æ—¶é—´é—´éš™ï¼Œåˆ†å‰²è¿ç»­æ®µ
    #    - gap > 1 frame â†’ åˆ†å‰²ç‚¹

    # 4. åœ¨è¿ç»­æ®µå†…æå–episodes
```

### Step 2: å›ºå®šæ­¥é•¿Episodeæå–

```python
# å‚æ•°:
T = 80          # Episodeé•¿åº¦ï¼ˆå¸§ï¼‰
stride = 15     # Episodeé—´éš”ï¼ˆå¸§ï¼‰

# æå–é€»è¾‘:
for start_frame in range(segment_start, segment_end - T + 1, stride):
    episode = extract_episode(start_frame, T)
    # episode.shape = [T=80, K=50, F=12]
```

### Step 3: æ—¶åºåˆ’åˆ†ï¼ˆChronological Splitï¼‰

```python
# Scheme A: å…ˆç¡®å®šframe cutoffsï¼Œå†ç‹¬ç«‹æå–
train_cutoff = total_frames * 0.70
val_cutoff = total_frames * 0.85

# åœ¨å„splitçš„frameèŒƒå›´å†…ç‹¬ç«‹æå–episodes
train_episodes = extract_episodes(0, train_cutoff)
val_episodes = extract_episodes(train_cutoff, val_cutoff)
test_episodes = extract_episodes(val_cutoff, total_frames)

# âœ… ä¿è¯æ—¶é—´ä¸é‡å 
```

### Step 4: ç‰¹å¾å·¥ç¨‹

ä»åŸå§‹22åˆ—æå–12ç»´ç‰¹å¾ï¼š

```python
features = [
    center_x,           # [0] ä½ç½®Xï¼ˆå½’ä¸€åŒ–ï¼‰
    center_y,           # [1] ä½ç½®Yï¼ˆå½’ä¸€åŒ–ï¼‰
    vx,                 # [2] é€Ÿåº¦Xï¼ˆè®¡ç®—å¾—åˆ°ï¼‰
    vy,                 # [3] é€Ÿåº¦Yï¼ˆè®¡ç®—å¾—åˆ°ï¼‰
    ax,                 # [4] åŠ é€Ÿåº¦Xï¼ˆè®¡ç®—å¾—åˆ°ï¼‰
    ay,                 # [5] åŠ é€Ÿåº¦Yï¼ˆè®¡ç®—å¾—åˆ°ï¼‰
    angle,              # [6] æœå‘è§’åº¦
    class_id,           # [7] è½¦è¾†ç±»åˆ«ï¼ˆç¦»æ•£ï¼‰
    lane_id,            # [8] è½¦é“IDï¼ˆç¦»æ•£ï¼Œç¼–ç ä¸ºæ•´æ•°ï¼‰
    has_preceding,      # [9] æ˜¯å¦æœ‰å‰è½¦ï¼ˆ0/1ï¼‰
    has_following,      # [10] æ˜¯å¦æœ‰åè½¦ï¼ˆ0/1ï¼‰
    site_id             # [11] ç«™ç‚¹IDï¼ˆ0-8è¡¨ç¤ºA-Iï¼‰
]
```

### Step 5: è¾“å‡ºæ ¼å¼

```python
# NPZæ–‡ä»¶ (train_episodes.npz, val_episodes.npz, test_episodes.npz)
{
    'states': [N, T=80, K=50, F=12],   # Episodeæ•°æ®
    'masks': [N, T=80, K=50],          # 1=çœŸå®è½¦è¾†, 0=padding
    'scene_ids': [N],                  # ç«™ç‚¹ID
    'start_frames': [N],               # Episodeèµ·å§‹frame
    'end_frames': [N]                  # Episodeç»“æŸframe
}

# Metadata (metadata.json)
{
    "n_features": 12,
    "episode_length": 80,
    "fps": 30.0,
    "lane_mapping": {"A:A1": 1, "A:B1": 2, ...},
    ...
}
```

---

## ğŸ¯ æ•°æ®ä½¿ç”¨ç¤ºä¾‹

### åŠ è½½é¢„å¤„ç†åçš„æ•°æ®

```python
import numpy as np
import json

# åŠ è½½è®­ç»ƒæ•°æ®
data = np.load('data/processed/train_episodes.npz')
states = data['states']      # [N, 80, 50, 12]
masks = data['masks']        # [N, 80, 50]

# åŠ è½½å…ƒæ•°æ®
with open('data/processed/metadata.json', 'r') as f:
    metadata = json.load(f)

print(f"Episodes: {len(states)}")
print(f"Features: {metadata['n_features']}")
print(f"Lanes: {len(metadata['lane_mapping'])}")
```

### ç‰¹å¾ç´¢å¼•

```python
# ä»statesä¸­æå–ç‰¹å¾
positions = states[:, :, :, 0:2]      # [N, T, K, 2] - center_x, center_y
velocities = states[:, :, :, 2:4]     # [N, T, K, 2] - vx, vy
accelerations = states[:, :, :, 4:6]  # [N, T, K, 2] - ax, ay
angles = states[:, :, :, 6]           # [N, T, K] - angle
class_ids = states[:, :, :, 7]        # [N, T, K] - class_id (discrete)
lane_ids = states[:, :, :, 8]         # [N, T, K] - lane_id (discrete)
site_ids = states[:, :, :, 11]        # [N, T, K] - site_id (0-8)
```

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- **README.md**: å®Œæ•´çš„é¢„å¤„ç†å’Œè®­ç»ƒå·¥ä½œæµç¨‹
- **CLAUDE.md**: å¼€å‘è€…æŠ€æœ¯æŒ‡å¯¼
- **validate_preprocessing.py**: æ•°æ®éªŒè¯è„šæœ¬

---

## âš ï¸ é‡è¦æé†’

1. **åŸå§‹æ•°æ®ä¸è¦ä¿®æ”¹**: `data/raw/` ç›®å½•ä¸‹çš„CSVæ–‡ä»¶åº”ä¿æŒåŸæ ·
2. **å¤§æ–‡ä»¶å¤„ç†**: 14GBæ•°æ®éœ€è¦è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å’Œå†…å­˜
3. **å¤„ç†æ—¶é—´**: å®Œæ•´é¢„å¤„ç†å¯èƒ½éœ€è¦10-30åˆ†é’Ÿï¼ˆå–å†³äºç¡¬ä»¶ï¼‰
4. **ç«™ç‚¹å·®å¼‚**: ä¸åŒç«™ç‚¹çš„è½¦é“ç»“æ„ã€åæ ‡èŒƒå›´éƒ½ä¸åŒï¼Œéœ€è¦ç«™ç‚¹çº§å¤„ç†
5. **ç¦»æ•£ç‰¹å¾**: `class_id`, `lane_id`, `site_id` ä¸è¦å½’ä¸€åŒ–ï¼Œä½¿ç”¨embedding

---

**æ•°æ®æ”¶é›†æ—¶é—´**: 2024å¹´12æœˆ
**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2025-12-12
**æ•°æ®ç‰ˆæœ¬**: v1.0
